<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Load Runner </title>
	<link rel="stylesheet" type="text/css" href="StyleLoadRunner.css" />
	<!-- Code JavaScript local -->
	<script type="text/javascript">
		let objCanvas = null;
		let objC2D = null;
		let objCycleAnimation = null;
		let objImageFond = null;
		let imagePlateforme = new Image();
		let imageEchelle = new Image();
		let imageCorde = new Image();
		let objPlateformes = null;

		function initAnimation() {
			objCanvas = document.getElementById('monCanvas');
			objC2D = objCanvas.getContext('2d');
			initImageFond();
			initPlateformesJeu();
			dessiner(); // Dessiner une première fois
			animer();
		}
		// Aller chercher l'image de fond
		function initImageFond() {
			objImageFond = new Image();
			objImageFond.src = 'backroundLoadRunner.png';
		}
		function initPlateformesJeu() {
			objPlateformes = new Object();
			imagePlateforme.src = 'sol2Decoupe.png';
			imageEchelle.src = 'echelleDecoupe.png';
			imageCorde.src = '';
			objPlateformes.binDessiner = false;
			objPlateformes.tabPlateformes = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
				, [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 3, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3, 1, 1, 1, 2],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
			[0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 2, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]];


		}


		// Un cycle d'animation	
		function animer() {
			// Requête pour le prochain cycle
			objCycleAnimation = requestAnimationFrame(animer);

			// Le cycle d'animation
			effacerDessin();
			mettreAjourAnimation();
			dessiner();
		}

		// Arrêter l'animation
		function arreterAnimation() {
			if (objCycleAnimation != null)
				cancelAnimationFrame(objCycleAnimation);
			objCycleAnimation = null;
		}

		// Pour effacer le dessin
		function effacerDessin() {
			objC2D.clearRect(0, 0, objCanvas.width, objCanvas.height);
		}

		// Pour mettre à jour l'animation
		function mettreAjourAnimation() {
		}

		// Pour dessiner
		function dessiner() {
			dessinerFond();
			dessinerPlateformesJeu();
		}
		// Pour dessiner l'image de fond
		function dessinerFond() {
			objC2D.save();  // Sauvegarde le contexte
			objC2D.drawImage(objImageFond, 0, 0, objCanvas.width * 3 / 4, objCanvas.height * 3 / 4);
			objC2D.restore(); // Restaure le contexte
		}
		function dessinerPlateformesJeu() {

			for (var i = 0; i < objPlateformes.tabPlateformes.length; i++) {
				//objC2D.drawImage(imagePlateforme, 0, 0);
				for (var j = 0; j < objPlateformes.tabPlateformes[i].length; j++) {
					if (objPlateformes.tabPlateformes[i][j] == 1) {
						objC2D.drawImage(imagePlateforme, j * 30, i * 30);
					}
					if (objPlateformes.tabPlateformes[i][j] == 2) {
						objC2D.drawImage(imageEchelle, j * 30, i * 30);
					}

				}

			}
		}
	</script>
</head>

<body onload="initAnimation()">
	<canvas id="monCanvas" width="1200" height="800">
		Votre navigateur ne supporte pas la balise canvas
	</canvas>
</body>

</html>